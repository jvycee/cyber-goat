{{!< default}}

{{!-- Individual post template for the cyberpunk Ghost theme --}}

<article class="post-container {{post_class}}">
    {{!-- Post Header --}}
    <header class="post-header">
        {{#if feature_image}}
        <div class="post-feature-image">
            <img src="{{img_url feature_image size="xl"}}" alt="{{title}}" class="cyberpunk-image">
            <div class="feature-image-overlay"></div>
        </div>
        {{/if}}
        
        <div class="post-header-content glass">
            {{#if primary_tag}}
            <div class="post-tags">
                <a href="{{primary_tag.url}}" class="post-tag btn btn-ghost btn-sm">
                    <span class="tag-hash">#</span>{{primary_tag.name}}
                </a>
            </div>
            {{/if}}
            
            <h1 class="post-title text-glow">{{title}}</h1>
            
            {{#if excerpt}}
            <p class="post-excerpt">{{excerpt}}</p>
            {{/if}}
            
            <div class="post-meta">
                <div class="post-meta-group">
                    {{#if primary_author}}
                    <div class="post-author">
                        {{#if primary_author.profile_image}}
                        <img src="{{img_url primary_author.profile_image size="s"}}" alt="{{primary_author.name}}" class="author-avatar">
                        {{else}}
                        <div class="author-avatar author-avatar-default">
                            <span class="author-initial">{{primary_author.name.[0]}}</span>
                        </div>
                        {{/if}}
                        <div class="author-info">
                            <a href="{{primary_author.url}}" class="author-name">{{primary_author.name}}</a>
                            {{#if primary_author.bio}}
                            <span class="author-bio">{{primary_author.bio}}</span>
                            {{/if}}
                        </div>
                    </div>
                    {{/if}}
                </div>
                
                <div class="post-meta-group">
                    <time class="post-date" datetime="{{date format="YYYY-MM-DD"}}">
                        {{date format="MMM DD, YYYY"}}
                    </time>
                    <span class="post-reading-time">{{reading_time}} min read</span>
                </div>
            </div>
        </div>
    </header>

    {{!-- Post Content --}}
    <section class="post-content">
        <div class="post-content-wrapper glass">
            {{content}}
        </div>
    </section>

    {{!-- Post Footer --}}
    <footer class="post-footer">
        {{!-- Tags --}}
        {{#if tags}}
        <div class="post-tags-section glass">
            <h4 class="tags-title">Tagged with</h4>
            <div class="post-tags-list">
                {{#foreach tags}}
                <a href="{{url}}" class="post-tag btn btn-ghost btn-sm">
                    <span class="tag-hash">#</span>{{name}}
                </a>
                {{/foreach}}
            </div>
        </div>
        {{/if}}

        {{!-- Author Card --}}
        {{#if primary_author}}
        <div class="author-card glass">
            <div class="author-card-content">
                {{#if primary_author.profile_image}}
                <img src="{{img_url primary_author.profile_image size="m"}}" alt="{{primary_author.name}}" class="author-card-avatar">
                {{else}}
                <div class="author-card-avatar author-avatar-default">
                    <span class="author-initial">{{primary_author.name.[0]}}</span>
                </div>
                {{/if}}
                
                <div class="author-card-info">
                    <h4 class="author-card-name">
                        <a href="{{primary_author.url}}">{{primary_author.name}}</a>
                    </h4>
                    {{#if primary_author.bio}}
                    <p class="author-card-bio">{{primary_author.bio}}</p>
                    {{/if}}
                    
                    <div class="author-card-meta">
                        {{#if primary_author.website}}
                        <a href="{{primary_author.website}}" class="author-link" target="_blank" rel="noopener">
                            Website
                        </a>
                        {{/if}}
                        {{#if primary_author.twitter}}
                        <a href="{{twitter_url primary_author.twitter}}" class="author-link" target="_blank" rel="noopener">
                            Twitter
                        </a>
                        {{/if}}
                        {{#if primary_author.facebook}}
                        <a href="{{facebook_url primary_author.facebook}}" class="author-link" target="_blank" rel="noopener">
                            Facebook
                        </a>
                        {{/if}}
                    </div>
                </div>
            </div>
        </div>
        {{/if}}

        {{!-- Post Navigation --}}
        <nav class="post-navigation">
            {{#prev_post}}
            <div class="post-nav-item post-nav-prev">
                <a href="{{url}}" class="post-nav-link glass">
                    <div class="post-nav-direction">‚Üê Previous</div>
                    <h5 class="post-nav-title">{{title}}</h5>
                </a>
            </div>
            {{/prev_post}}
            
            {{#next_post}}
            <div class="post-nav-item post-nav-next">
                <a href="{{url}}" class="post-nav-link glass">
                    <div class="post-nav-direction">Next ‚Üí</div>
                    <h5 class="post-nav-title">{{title}}</h5>
                </a>
            </div>
            {{/next_post}}
        </nav>

        {{!-- Related Posts --}}
        {{#get "posts" filter="tag:{{primary_tag.slug}}+id:-{{id}}" limit="3"}}
        {{#if posts}}
        <section class="related-posts">
            <h3 class="related-posts-title">Related Posts</h3>
            <div class="related-posts-grid">
                {{#foreach posts}}
                <article class="related-post-card glass">
                    {{#if feature_image}}
                    <div class="related-post-image">
                        <a href="{{url}}">
                            <img src="{{img_url feature_image size="m"}}" alt="{{title}}" class="cyberpunk-image">
                        </a>
                    </div>
                    {{/if}}
                    <div class="related-post-content">
                        <h4 class="related-post-title">
                            <a href="{{url}}">{{title}}</a>
                        </h4>
                        {{#if excerpt}}
                        <p class="related-post-excerpt">{{excerpt words="15"}}</p>
                        {{/if}}
                        <div class="related-post-meta">
                            <time datetime="{{date format="YYYY-MM-DD"}}">{{date format="MMM DD"}}</time>
                            <span class="reading-time">{{reading_time}} min</span>
                        </div>
                    </div>
                </article>
                {{/foreach}}
            </div>
        </section>
        {{/if}}
        {{/get}}

        {{!-- Comments Section (if enabled) --}}
        {{#if @labs.members}}
        <section class="comments-section">
            <div class="comments-container glass">
                <h3 class="comments-title">Join the Discussion</h3>
                <p class="comments-description">Share your thoughts and connect with other readers.</p>
                
                {{!-- This would be replaced with your preferred commenting system --}}
                <div class="comments-placeholder">
                    <div class="comments-coming-soon">
                        <div class="comments-icon">üí¨</div>
                        <p>Comments system integration coming soon.</p>
                    </div>
                </div>
            </div>
        </section>
        {{/if}}
    </footer>
</article>

{{!-- Floating Table of Contents (for long posts) --}}
<aside class="toc-container" id="tableOfContents">
    <div class="toc glass">
        <h4 class="toc-title">Contents</h4>
        <nav class="toc-nav" id="tocNav">
            <!-- Table of contents will be generated by JavaScript -->
        </nav>
        <button class="toc-toggle" id="tocToggle" aria-label="Toggle table of contents">
            <span class="toc-toggle-icon">üìñ</span>
        </button>
    </div>
</aside>

{{!-- Reading Progress Bar --}}
<div class="reading-progress">
    <div class="reading-progress-bar" id="readingProgressBar"></div>
</div>